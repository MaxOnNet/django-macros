* things to consider: 
    - adding support for filters.
    - adding validation for the macro names, making sure that they are legitimate python variable names.
    - inspect/optimize source code more.